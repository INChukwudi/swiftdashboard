<!-- Overlay -->
<div class="drawer-overlay" 
     [class.drawer-overlay-on]="isDrawerOpen"
     (click)="onClose()"></div>

<!-- Drawer -->
<div #drawer
     id="kt_project_info" 
     class="bg-body drawer-new"
     [class.drawer-on]="isDrawerOpen">
  
  <!-- Card -->
  <div class="card border-0 shadow-none rounded-0 w-100">
    
    <!-- Card header -->
    <div class="row card-header bgi-position-y-bottom bgi-position-x-end bgi-size-cover bgi-no-repeat rounded-0 border-0 py-4 sticky-top" 
         style="background-image:url('/assets/background.png')">
      <div class="col-6">
        <h3 class="card-title fs-3 fw-bold text-white flex-column m-0">
          Task information
          <small class="text-white opacity-50 fs-7 fw-semibold pt-1">
            This task is visible to its collaborators and members of the project
          </small>
        </h3>
      </div>
      <div class="col-6 align-self-end">
        <div class="card-toolbar">
          <button type="button" 
                  class="btn btn-sm btn-icon bg-white bg-opacity-25 btn-color-white p-0 w-20px h-20px rounded-1"
                  (click)="onClose()">
            <span class="svg-icon svg-icon-3">×</span>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Card body -->
    <div class="card-body position-relative">
      
      <!-- Form -->
      <form class="form">
        <div class="card-body" style="padding-left:10px; padding-right:10px;">
          
          <!-- Progress & Status Row -->
          <div class="row mb-8 align-items-center">
            
            <!-- Task Progress Banner -->
            <div class="col-xl-8">
              <div class="notice d-flex flex-column bg-light-primary rounded p-4 h-100">
                <div class="d-flex justify-content-between fw-bold fs-6 text-dark opacity-75 mb-2">
                  <span>Task Completion Rate</span>
                  <span class="text-primary">{{taskCompletionRate}}%</span>
                </div>
          
                <div class="progress h-8px rounded">
                  <div class="progress-bar"
                       [class]="taskCompletionClass"
                       role="progressbar"
                       [style.width.%]="taskCompletionRate"
                       [attr.aria-valuenow]="taskCompletionRate"
                       aria-valuemin="0"
                       aria-valuemax="100"></div>
                </div>
          
                <small class="text-muted mt-2">
                  {{taskCompletionRate === 100 ? 'Task completed!' : taskCompletionRate >= 50 ? 'Progress is looking good' : 'Keep working on it'}}
                </small>
              </div>
            </div>
          
            <!-- Task Status Dropdown -->
            <div class="col-xl-4">
              <div class="notice rounded p-4 h-100 d-flex flex-column justify-content-center"
                   [class]="statusBadgeClass">
                <label class="fw-bold text-white mb-2">Task Status</label>
          
                <select class="form-select form-select-solid"
                        [(ngModel)]="taskStatus"
                        (change)="onStatusChange()"
                        [disabled]="!canUpdateTask"
                        name="taskStatus">
                  <option value="completed">Completed</option>
                  <option value="in-progress">In Progress</option>
                  <option value="under-review">Under Review</option>
                  <option value="overdue">Overdue</option>
                  <option value="blocked">Blocked</option>
                </select>
              </div>
            </div>
          
          </div>
          
          <!-- Task Title -->
          <div class="row mb-8">
            <div class="col-xl-3">
              <div class="fs-6 fw-semibold mt-2 mb-3">Task Title</div>
            </div>
            <div class="col-xl-9 fv-row">
              <input type="text" 
                     class="form-control form-control-solid" 
                     [(ngModel)]="taskTitle"
                     [disabled]="!canUpdateTask"
                     name="taskTitle" />
            </div>
          </div>
          
          <!-- Task Description -->
          <div class="row mb-8">
            <div class="col-xl-3">
              <div class="fs-6 fw-semibold mt-2 mb-3">Task Description</div>
            </div>
            <div class="col-xl-9 fv-row">
              <textarea class="form-control form-control-solid" 
                        [(ngModel)]="taskDescription"
                        [disabled]="!canUpdateTask"
                        name="taskDescription"
                        rows="3"
                        placeholder="Enter task description"></textarea>
            </div>
          </div>
          
          <!-- Assigned By -->
          <div class="row mb-8">
            <div class="col-xl-3">
              <div class="fs-6 fw-semibold mt-2 mb-3">Assigned By</div>
            </div>
            <div class="col-xl-9 fv-row">
              <div class="d-flex align-items-center">
                <div class="me-5 position-relative">
                  <div class="symbol symbol-35px symbol-circle">
                    <img [alt]="assignedBy.name" [src]="assignedBy.avatar">
                  </div>
                </div>
                <div class="fw-semibold">
                  <a href="#" class="fs-5 fw-bold text-gray-900 text-hover-primary">{{assignedBy.name}}</a>
                  <div class="text-gray-500 fs-7">{{assignedBy.email}}</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Category -->
          <div class="row mb-8">
            <div class="col-xl-3">
              <div class="fs-6 fw-semibold mt-2 mb-3">Category</div>
            </div>
            <div class="col-xl-9 fv-row">
              <div class="d-flex align-items-center">
                <span class="badge badge-light-primary fs-5 fw-medium">{{category}}</span>
              </div>
            </div>
          </div>
          
          <!-- Collaborators -->
          <div class="row mb-8">
            <div class="col-xl-3">
              <div class="fs-6 fw-semibold mt-2 mb-3">Collaborators</div>
            </div>
            <div class="col-xl-9 fv-row">
              <div class="d-flex align-items-center flex-wrap gap-3">
                <div class="symbol-group symbol-hover">
                  <div *ngFor="let collab of collaborators" 
                       class="symbol symbol-35px symbol-circle position-relative me-2"
                       [title]="collab.name">
                    <span *ngIf="!collab.avatar" 
                          class="symbol-label fw-bold"
                          [class]="'bg-' + collab.color + ' text-inverse-' + collab.color">
                      {{collab.initial}}
                    </span>
                    <img *ngIf="collab.avatar" [alt]="collab.name" [src]="collab.avatar" />
                    <button *ngIf="canAddCollaborators"
                            type="button"
                            class="btn btn-icon btn-sm btn-danger position-absolute"
                            style="width: 18px; height: 18px; padding: 0; font-size: 10px; top: -5px; right: -5px;"
                            (click)="removeCollaborator(collab.id)">
                      ×
                    </button>
                  </div>
                </div>

                <button *ngIf="canAddCollaborators"
                        type="button" 
                        class="btn btn-sm pe-10 text-white btn-primary"
                        data-bs-toggle="modal" 
                        data-bs-target="#kt_modal_add_task_collaborators">
                  <i class="ki-outline ki-plus fs-3"></i>
                  Add Collaborators
                </button>
              </div>
            </div>
          </div>

          <!-- Start & Due Date -->
          <div class="row mb-8">
            <div class="col-xl-3">
              <div class="fs-6 fw-semibold mt-2 mb-3">Start & Due Date</div>
            </div>
            <div class="col-xl-4 fv-row mb-3 mb-xl-0">
              <label class="fs-7 fw-semibold mb-2 text-muted">Start Date</label>
              <div class="position-relative d-flex align-items-center">
                <input 
                  class="form-control form-control-solid" 
                  [(ngModel)]="startDate"
                  [disabled]="!canUpdateTask"
                  name="startDate" 
                  type="date" 
                  placeholder="YYYY-MM-DD" />
              </div>
              <!-- Show formatted date below input -->
              <small class="text-muted" *ngIf="startDate">
                {{ formatDate(startDate) }}
              </small>
            </div>
            
            <!-- DUE DATE INPUT - Updated Version -->
            <div class="col-xl-4 fv-row mb-3 mb-xl-0">
              <label class="fs-7 fw-semibold mb-2 text-muted">Due Date</label>
              <div class="position-relative d-flex align-items-center">
                <input 
                  class="form-control form-control-solid" 
                  [(ngModel)]="dueDate"
                  [disabled]="!canUpdateTask"
                  name="dueDate" 
                  type="date"
                  placeholder="YYYY-MM-DD" />
              </div>
              <!-- Show formatted date below input -->
              <small class="text-muted" *ngIf="dueDate">
                {{ formatDate(dueDate) }}
              </small>
            </div>
          </div>
          
        </div>
      </form>
      
      <!-- Tabs -->
      <div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
        <div class="card px-3 py-3">
          <ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-n2">
            <li class="nav-item">
              <a class="nav-link text-active-primary pb-4" 
                 [class.active]="activeTab === 'subtask'"
                 (click)="setActiveTab('subtask')">
                Sub Tasks
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-active-primary pb-4" 
                 [class.active]="activeTab === 'comment'"
                 (click)="setActiveTab('comment')">
                Comments
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-active-primary pb-4" 
                 [class.active]="activeTab === 'file'"
                 (click)="setActiveTab('file')">
                Files
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-active-primary pb-4" 
                 [class.active]="activeTab === 'activity'"
                 (click)="setActiveTab('activity')">
                Activity
              </a>
            </li>
          </ul>
        </div>
        
        <!-- Tab Content -->
        <div class="tab-content">
          
          <!-- Sub Tasks Tab -->
          <div *ngIf="activeTab === 'subtask'" class="tab-pane fade show active">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Sub Tasks</h3>
                <div class="card-toolbar">
                  <span class="badge" [class]="taskBadgeClass">
                    {{completedTasksCount}}/{{totalTasksCount}} Completed
                  </span>
                </div>
              </div>
              <div class="card-body">
                <div *ngIf="isLoadingSubtasks" class="text-center py-5">
                  <span class="spinner-border spinner-border-sm"></span>
                  Loading subtasks...
                </div>
                
                <!-- Subtask Rows (duplicatable) -->
            <!-- Subtask Rows (duplicatable) -->
            <div *ngFor="let task of subTasks; let i = index; trackBy: trackByTaskId" 
            class="row g-9 mb-8 align-items-end sub-activity-row">
         
         <!-- Checkbox -->
         <div class="col-auto d-flex align-items-end pb-2">
           <div class="form-check form-check-custom form-check-solid form-check-lg">
             <input class="form-check-input" 
                    type="checkbox" 
                    [(ngModel)]="task.completed"
                    [name]="'subtask_' + i"
                    (change)="toggleSubTaskComplete(task)" />
           </div>
         </div>
         
         <!-- Task Title Input -->
         <div class="col-md-8 fv-row">
           <label class="fs-6 fw-semibold mb-2">Task Title</label>
           <input type="text" 
                  class="form-control form-control-solid" 
                  [(ngModel)]="task.title"
                  [name]="'subtask_title_' + i"
                  [style.text-decoration]="task.completed ? 'line-through' : 'none'"
                  [style.opacity]="task.completed ? '0.6' : '1'" />
         </div>
         
         <!-- Action Buttons -->
    <!-- Action Buttons -->
    <div class="col-auto d-flex gap-2 pb-2">
      <!-- Create Subtask Button (only for new subtasks) -->
      <button *ngIf="!task.id" 
              type="button" 
              class="btn btn-sm btn-light-success"
              (click)="createSubtask(i)"
              [title]="'Create this subtask'">
        <i class="ki-outline ki-check fs-3"></i>
        Create
      </button>
      
      <!-- Created Status (for created subtasks) -->
      <button *ngIf="task.id" 
              type="button" 
              class="btn btn-sm text-white btn-primary"
              disabled
              [title]="'Subtask created'">
        <i class="ki-outline ki-shield-tick fs-3"></i>
        Created
      </button>
      
      <!-- Delete Button -->
      <button type="button" 
              class="btn btn-sm btn-light-danger btn-active-color-danger"
              (click)="deleteSubTask(i)"
              [title]="'Delete subtask'">
        <i class="ki-outline ki-trash fs-3"></i>
      </button>
    </div>
       </div>
                
                <!-- Add Sub Task Button -->
                <div class="row g-9 mb-5">
                  <div class="col-12">
                    <button type="button" 
                            class="btn btn-sm text-white btn-primary" 
                            (click)="addSubTask()">
                      <i class="ki-outline ki-plus fs-3"></i>
                      Add Sub Task
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Comments Tab -->
          <div *ngIf="activeTab === 'comment'" class="tab-pane fade show active">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Comments</h3>
                <div class="card-toolbar">
                  <span class="badge badge-light-primary">{{comments.length}} Comments</span>
                </div>
              </div>
              <div class="card-body">
                
                <!-- Add Comment Form -->
                <div class="mb-8">
                  <div class="d-flex align-items-start">
                    <div class="symbol symbol-45px me-5">
                      <img [src]="assignedBy.avatar" alt="avatar" />
                    </div>
                    <div class="flex-grow-1">
                      <textarea class="form-control form-control-solid mb-3" 
                                rows="3" 
                                [(ngModel)]="newComment"
                                name="newComment"
                                placeholder="Write a comment..."></textarea>
                      
                      <!-- File attachment option -->
                      <div class="mb-3">
                        <input #fileInput
                               type="file" 
                               class="form-control form-control-sm"
                               (change)="onFileSelected($event)" />
                        <small class="text-muted" *ngIf="selectedFile">
                          Selected: {{selectedFile.name}}
                        </small>
                      </div>
                      
                      <div class="d-flex justify-content-end">
                        <button type="button" 
                                class="btn btn-sm text-white btn-primary" 
                                (click)="addComment()">
                          <i class="ki-outline ki-message-text fs-3"></i>
                          Post {{selectedFile ? 'with File' : 'Comment'}}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="separator separator-dashed mb-8"></div>
                
                <div *ngIf="isLoadingComments" class="text-center py-5">
                  <span class="spinner-border spinner-border-sm"></span>
                  Loading comments...
                </div>
                
                <!-- Comments List -->
                <div *ngFor="let comment of comments; trackBy: trackByCommentId" 
                     class="d-flex align-items-start mb-8">
                  <div class="symbol symbol-45px me-5">
                    <img *ngIf="comment.avatar" [src]="comment.avatar" alt="avatar" />
                    <span *ngIf="!comment.avatar" 
                          class="symbol-label bg-light-success text-success fw-bold fs-6">
                      {{getCommentInitials(comment.author)}}
                    </span>
                  </div>
                  <div class="flex-grow-1">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                      <div>
                        <a href="#" class="text-gray-800 text-hover-primary fw-bold fs-6">{{comment.author}}</a>
                        <span class="text-gray-500 fw-semibold fs-7 ms-2">{{comment.timestamp}}</span>
                      </div>
                      <button type="button" 
                              class="btn btn-icon btn-sm btn-light-danger"
                              (click)="deleteComment(comment.id)">
                        <i class="ki-outline ki-trash fs-3"></i>
                      </button>
                    </div>
                    <div class="text-gray-700 fs-6 fw-normal mb-3">{{comment.text}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Files Tab -->
          <div *ngIf="activeTab === 'file'" class="tab-pane fade show active">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Project Files</h3>
                <div class="card-toolbar">
                  <span class="badge badge-light-primary">{{files.length}} Files</span>
                </div>
              </div>
              <div class="card-body">
                <div *ngIf="isLoadingFiles" class="text-center py-5">
                  <span class="spinner-border spinner-border-sm"></span>
                  Loading files...
                </div>
                
                <div class="row g-6 g-xl-9 mb-6 mb-xl-9">
                  
                  <!-- Files -->
                  <div *ngFor="let file of files; trackBy: trackByFileId" 
                       class="col-md-6 col-lg-4 col-xl-3">
                    <div class="card h-100 position-relative">
                      <button type="button" 
                              class="btn btn-icon btn-sm btn-light-danger position-absolute top-0 end-0 m-3"
                              (click)="deleteFile(file.id)">
                        <i class="ki-outline ki-trash fs-3"></i>
                      </button>
                      <div class="card-body d-flex justify-content-center text-center flex-column p-8">
                        <a href="#" class="text-gray-800 text-hover-primary d-flex flex-column">
                          <div class="symbol symbol-60px mb-5">
                            <img [src]="getFileIcon(file.name)" alt="file" />
                          </div>
                          <div class="fs-5 fw-bolder mb-2">{{file.name}}</div>
                        </a>
                        <div class="fs-7 fw-semibold text-gray-500 mb-1">{{formatFileSize(file.size)}}</div>
                        <div class="fs-7 fw-bold text-gray-400">{{file.uploadDate}}</div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Upload Card -->
                  <div class="col-md-6 col-lg-4 col-xl-3">
                    <div class="card h-100 flex-center bg-light-primary border-primary border border-dashed p-8"
                         style="cursor: pointer;">
                      <img src="assets/files/upload.svg" class="h-50px mb-5" alt="Upload" />
                      <a class="text-primary fs-5 fw-bolder mb-2">Upload Files</a>
                      <div class="fs-7 fw-bold text-gray-400">Click to browse</div>
                      <input type="file" 
                             class="form-control mt-3"
                             multiple 
                             (change)="handleFileUpload($event)" />
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>
          </div>
          
          <!-- Activity Tab -->
          <div *ngIf="activeTab === 'activity'" class="tab-pane fade show active">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Activity Timeline</h3>
                <div class="card-toolbar">
                  <span class="badge badge-light-primary">{{activities.length}} Activities</span>
                </div>
              </div>
              <div class="card-body">
                <div *ngIf="isLoadingActivities" class="text-center py-5">
                  <span class="spinner-border spinner-border-sm"></span>
                  Loading activities...
                </div>
                
                <div *ngIf="activities.length === 0 && !isLoadingActivities" class="text-center py-10">
                  <i class="ki-outline ki-information-5 fs-3x text-gray-400 mb-3"></i>
                  <div class="text-gray-600 fw-semibold fs-5">No activities yet</div>
                  <div class="text-gray-500 fs-7">Activity will appear here as you work on the task</div>
                </div>
                
                <!-- Timeline -->
                <div class="timeline-label">
                  <div *ngFor="let activity of activities; trackBy: trackByActivityId" 
                       class="timeline-item me-5 mb-5">
                    <div class="timeline-label me-10 fw-bold text-gray-800 fs-8">
                      {{activity.timestamp|date:'short'}}
                    </div>
                    
                    <div class="timeline-badge me-5">
                      <i [class]="'ki-outline' + getActivityIcon(activity.type) + ' fs-1 text-primary'"></i>
                    </div>
                    
                    <div class="fw-mormal timeline-content ps-3">
                      <div class="d-flex align-items-center mb-2">
                        <span class="fs-6 fw-bold text-gray-800 me-2">{{activity.user}}</span>
                        <span class="badge badge-light-primary fs-8">{{activity.type}}</span>
                      </div>
                      <div class="text-gray-700 fs-6">{{activity.action}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
      
    </div>

    <!-- Card Footer -->
    <div class="card-footer py-5 text-center" id="kt_activities_footer">
      <button *ngIf="canDeleteTask"
              type="button"
              class="btn btn-danger px-6 me-3 text-nowrap" 
              style="width: 45%;"
              (click)="confirmDeleteTask()">
        Delete
        <i class="ki-outline ki-trash fs-3 text-white"></i>
      </button>
      <button *ngIf="canUpdateTask"
              type="button"
              class="btn btn-primary px-6 ms-3 text-white text-nowrap" 
              [style.width]="canDeleteTask ? '45%' : '100%'"
              (click)="saveTaskUpdates()">
        Update Task
        <i class="ki-outline ki-arrow-right fs-3 text-white"></i>
      </button>
    </div>
    
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div *ngIf="showDeleteModal" 
     class="modal fade show d-block" 
     tabindex="-1" 
     style="background-color: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center p-10">
        <!-- Warning Icon -->
        <div class="mb-5">
          <i class="ki-outline ki-information-5 fs-5x text-warning"></i>
        </div>
        
        <!-- Message -->
        <h3 class="mb-5">Are you sure you want to delete this task?</h3>
        <p class="text-muted">This action cannot be undone. All subtasks, comments, and files associated with this task will also be deleted.</p>
        
        <!-- Buttons -->
        <div class="d-flex justify-content-center gap-3 mt-8">
          <button type="button" 
                  class="btn btn-light px-6"
                  (click)="cancelDelete()">
            No, cancel
          </button>
          <button type="button" 
                  class="btn btn-danger px-6"
                  (click)="deleteTask()">
            Yes, delete it!
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* CSS for hover effect */
  .hover-bg-light:hover {
    background-color: #f5f8fa;
  }

  .sub-activity-row input[type="text"]:disabled,
  .sub-activity-row textarea:disabled {
    background-color: #f5f8fa;
    cursor: not-allowed;
  }
</style>

<!--begin::Modal - Add Task Collaborators-->
<div class="modal fade" id="kt_modal_add_task_collaborators" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered mw-650px">
        <div class="modal-content">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            
            <div class="modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15">
                <div class="text-center mb-13">
                    <h1 class="mb-3">Add Collaborators</h1>
                    <div class="text-muted fw-semibold fs-5">Select employees to add to this task</div>
                </div>
                
                <!--begin::Search-->
                <div class="mb-10">
                    <input type="text" 
                           class="form-control form-control-solid" 
                           placeholder="Search employees..."
                           [(ngModel)]="employeeSearchTerm"
                           (input)="filterEmployees()"
                           name="employeeSearch" />
                </div>
                <!--end::Search-->
                
                <!--begin::Loading-->
                <div *ngIf="isLoadingEmployees" class="text-center py-5">
                  <span class="spinner-border spinner-border-sm"></span>
                  Loading employees...
                </div>
                <!--end::Loading-->
                
                <!--begin::Users list-->
                <div *ngIf="!isLoadingEmployees" class="mh-375px scroll-y me-n7 pe-7">
                    <div *ngFor="let employee of filteredEmployees" 
                         class="d-flex align-items-center p-3 rounded bg-hover-light mb-2">
                        <label class="form-check form-check-custom form-check-solid me-5">
                            <input class="form-check-input" 
                                   type="checkbox" 
                                   [checked]="isEmployeeSelected(employee)"
                                   (change)="toggleEmployeeSelection(employee)" />
                        </label>
                        
                        <div class="symbol symbol-35px symbol-circle me-5">
                            <img *ngIf="employee.avatarUrl" [src]="employee.avatarUrl" [alt]="employee.firstName" />
                            <span *ngIf="!employee.avatarUrl" class="symbol-label bg-light-primary text-primary fw-bold">
                                {{ employee.firstName[0] }}{{ employee.lastName[0] }}
                            </span>
                        </div>
                        
                        <div class="flex-grow-1">
                            <div class="fw-bold text-gray-800">{{ employee.firstName }} {{ employee.lastName }}</div>
                            <div class="text-muted fs-7">{{ employee.email }}</div>
                        </div>
                    </div>
                    
                    <!--begin::Empty state-->
                    <div *ngIf="filteredEmployees.length === 0" class="text-center py-10">
                        <i class="ki-duotone ki-information-5 fs-3x text-muted mb-3">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                        </i>
                        <div class="text-gray-600 fw-semibold">No employees found</div>
                    </div>
                    <!--end::Empty state-->
                </div>
                <!--end::Users list-->
                
                <!--begin::Actions-->
                <div class="d-flex justify-content-end mt-10">
                    <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" 
                            class="btn text-white btn-primary"
                            (click)="addCollaborators()"
                            [disabled]="selectedEmployees.length === 0">
                        <span>Add {{ selectedEmployees.length }} Collaborator(s)</span>
                    </button>
                </div>
                <!--end::Actions-->
            </div>
        </div>
    </div>
</div>
<!--end::Modal - Add Task Collaborators-->
