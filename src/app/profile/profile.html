<div class="d-flex flex-column flex-root app-root" id="kt_app_root">
    <!--begin::Page-->
    <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
        <!--begin::Header-->
        <div id="kt_app_header" class="app-header" data-kt-sticky="true" data-kt-sticky-activate="{default: true, lg: true}" data-kt-sticky-name="app-header-minimize" data-kt-sticky-offset="{default: '200px', lg: '0'}" data-kt-sticky-animation="false">
            <!--begin::Header container-->
            <div class="app-container container-fluid d-flex align-items-stretch justify-content-between" id="kt_app_header_container">
                <!--begin::Sidebar mobile toggle-->
                <div class="d-flex align-items-center d-lg-none ms-n3 me-1 me-md-2" title="Show sidebar menu">
                    <div class="btn btn-icon btn-active-color-primary w-35px h-35px" id="kt_app_sidebar_mobile_toggle">
                        <i class="ki-duotone ki-abstract-14 fs-2 fs-md-1">
                            <span class="path1"></span>
                            <span class="path2"></span>
                        </i>
                    </div>
                </div>
                <!--end::Sidebar mobile toggle-->
                <!--begin::Mobile logo-->
                <div class="d-flex align-items-center flex-grow-1 flex-lg-grow-0">
                    <a href="index.html" class="d-lg-none">
                        <img alt="Logo" src="assets/swiftlogo.png" class="h-30px" />
                    </a>
                </div>
                <!--end::Mobile logo-->
                <!--begin::Header wrapper-->
                <div class="d-flex align-items-stretch justify-content-between flex-lg-grow-1" id="kt_app_header_wrapper">
                    <!--begin::Menu wrapper-->
                    <div class="app-header-menu app-header-mobile-drawer align-items-center" data-kt-drawer="true" data-kt-drawer-name="app-header-menu" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="250px" data-kt-drawer-direction="end" data-kt-drawer-toggle="#kt_app_header_menu_toggle" data-kt-swapper="true" data-kt-swapper-mode="{default: 'append', lg: 'prepend'}" data-kt-swapper-parent="{default: '#kt_app_body', lg: '#kt_app_header_wrapper'}">
                        <h1 class="title">Account Settings</h1>
                    </div>
                    <!--end::Menu wrapper-->
                    <!--begin::Navbar-->
                    <div class="app-navbar flex-shrink-0">
                        <!--begin::Chat-->
                        <div class="app-navbar-item ms-1 ms-md-4">
                            <!--begin::Menu wrapper-->
                            <div class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px position-relative" id="kt_drawer_chat_toggle">
                                <i class="ki-duotone ki-message-notif fs-2">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                        <span class="path3"></span>
                                        <span class="path4"></span>
                                        <span class="path5"></span>
                                </i>
                                <span class="bullet bullet-dot bg-success h-6px w-6px position-absolute translate-middle top-0 start-50 animation-blink"></span>
                            </div>
                            <!--end::Menu wrapper-->
                        </div>
                        <!--end::Chat-->
                        
                        <!--begin::Theme mode-->
                        <div class="app-navbar-item ms-1 ms-md-4">
                            <!--begin::Menu toggle-->
                            <a href="#" class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px" data-kt-menu-trigger="{default:'click', lg: 'hover'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
                                <i class="ki-duotone ki-night-day theme-light-show fs-1">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                    <span class="path3"></span>
                                    <span class="path4"></span>
                                    <span class="path5"></span>
                                    <span class="path6"></span>
                                    <span class="path7"></span>
                                    <span class="path8"></span>
                                    <span class="path9"></span>
                                    <span class="path10"></span>
                                </i>
                                <i class="ki-duotone ki-moon theme-dark-show fs-1">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                </i>
                            </a>
                            <!--begin::Menu toggle-->
                            <!--begin::Menu-->
                            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-gray-500 menu-active-bg menu-state-color fw-semibold py-4 fs-base w-150px" data-kt-menu="true" data-kt-element="theme-mode-menu">
                                <!--begin::Menu item-->
                                <div class="menu-item px-3 my-0">
                                    <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="light">
                                        <span class="menu-icon" data-kt-element="icon">
                                            <i class="ki-duotone ki-night-day fs-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                                <span class="path3"></span>
                                                <span class="path4"></span>
                                                <span class="path5"></span>
                                                <span class="path6"></span>
                                                <span class="path7"></span>
                                                <span class="path8"></span>
                                                <span class="path9"></span>
                                                <span class="path10"></span>
                                            </i>
                                        </span>
                                        <span class="menu-title">Light</span>
                                    </a>
                                </div>
                                <!--end::Menu item-->
                                <!--begin::Menu item-->
                                <div class="menu-item px-3 my-0">
                                    <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="dark">
                                        <span class="menu-icon" data-kt-element="icon">
                                            <i class="ki-duotone ki-moon fs-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                        </span>
                                        <span class="menu-title">Dark</span>
                                    </a>
                                </div>
                                <!--end::Menu item-->
                                <!--begin::Menu item-->
                                <div class="menu-item px-3 my-0">
                                    <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="system">
                                        <span class="menu-icon" data-kt-element="icon">
                                            <i class="ki-duotone ki-screen fs-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                                <span class="path3"></span>
                                                <span class="path4"></span>
                                            </i>
                                        </span>
                                        <span class="menu-title">System</span>
                                    </a>
                                </div>
                                <!--end::Menu item-->
                            </div>
                            <!--end::Menu-->
                        </div>
                        <!--end::Theme mode-->
                        <!--begin::User menu-->
                        <div class="app-navbar-item ms-1 ms-md-4" id="kt_header_user_menu_toggle">
                            <!--begin::Menu wrapper-->
                            <div class="cursor-pointer symbol symbol-35px" data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
                                <img src="assets/pixelsicon.png" class="rounded-3" alt="user" />
                            </div>
                            <!--begin::User account menu-->
                            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-275px" data-kt-menu="true">
                                <!--begin::Menu item-->
                                <div class="menu-item px-3">
                                    <div class="menu-content d-flex align-items-center px-3">
                                        <!--begin::Avatar-->
                                        <div class="symbol symbol-50px me-5">
                                            <img alt="Logo" src="assets/pixelsicon.png" />
                                        </div>
                                        <!--end::Avatar-->
                                        <!--begin::Username-->
                                        <div class="d-flex flex-column">
                                            <div class="fw-bold d-flex align-items-center fs-5">Pixels Solutiin Ltd
                                            <span class="badge badge-light-success fw-bold fs-8 px-2 py-1 ms-2">Pro</span></div>
                                            
                                        </div>
                                        <!--end::Username-->
                                    </div>
                                </div>
                                <!--end::Menu item-->
                                
                                <!--begin::Menu separator-->
                                <div class="separator my-2"></div>
                                <!--end::Menu separator-->
                                <!--begin::Menu item-->
                                <div class="menu-item px-5" data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-placement="left-start" data-kt-menu-offset="-15px, 0">
                                    <a href="#" class="menu-link px-5">
                                        <span class="menu-title position-relative">Mode 
                                        <span class="ms-5 position-absolute translate-middle-y top-50 end-0">
                                            <i class="ki-duotone ki-night-day theme-light-show fs-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                                <span class="path3"></span>
                                                <span class="path4"></span>
                                                <span class="path5"></span>
                                                <span class="path6"></span>
                                                <span class="path7"></span>
                                                <span class="path8"></span>
                                                <span class="path9"></span>
                                                <span class="path10"></span>
                                            </i>
                                            <i class="ki-duotone ki-moon theme-dark-show fs-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                        </span></span>
                                    </a>
                                    <!--begin::Menu-->
                                    <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-gray-500 menu-active-bg menu-state-color fw-semibold py-4 fs-base w-150px" data-kt-menu="true" data-kt-element="theme-mode-menu">
                                        <!--begin::Menu item-->
                                        <div class="menu-item px-3 my-0">
                                            <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="light">
                                                <span class="menu-icon" data-kt-element="icon">
                                                    <i class="ki-duotone ki-night-day fs-2">
                                                        <span class="path1"></span>
                                                        <span class="path2"></span>
                                                        <span class="path3"></span>
                                                        <span class="path4"></span>
                                                        <span class="path5"></span>
                                                        <span class="path6"></span>
                                                        <span class="path7"></span>
                                                        <span class="path8"></span>
                                                        <span class="path9"></span>
                                                        <span class="path10"></span>
                                                    </i>
                                                </span>
                                                <span class="menu-title">Light</span>
                                            </a>
                                        </div>
                                        <!--end::Menu item-->
                                        <!--begin::Menu item-->
                                        <div class="menu-item px-3 my-0">
                                            <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="dark">
                                                <span class="menu-icon" data-kt-element="icon">
                                                    <i class="ki-duotone ki-moon fs-2">
                                                        <span class="path1"></span>
                                                        <span class="path2"></span>
                                                    </i>
                                                </span>
                                                <span class="menu-title">Dark</span>
                                            </a>
                                        </div>
                                        <!--end::Menu item-->
                                        <!--begin::Menu item-->
                                        <div class="menu-item px-3 my-0">
                                            <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="system">
                                                <span class="menu-icon" data-kt-element="icon">
                                                    <i class="ki-duotone ki-screen fs-2">
                                                        <span class="path1"></span>
                                                        <span class="path2"></span>
                                                        <span class="path3"></span>
                                                        <span class="path4"></span>
                                                    </i>
                                                </span>
                                                <span class="menu-title">System</span>
                                            </a>
                                        </div>
                                        <!--end::Menu item-->
                                    </div>
                                    <!--end::Menu-->
                                </div>
                                <!--end::Menu item-->
                            
                                <!--begin::Menu item-->
                                <div class="menu-item px-5 my-1">
                                    <a href="#" class="menu-link px-5">Account Settings</a>
                                </div>
                                <!--end::Menu item-->
                                <!--begin::Menu item-->
                                <div class="menu-item px-5">
                                    <a href="#" class="menu-link px-5">Sign Out</a>
                                </div>
                                <!--end::Menu item-->
                            </div>
                            <!--end::User account menu-->
                            <!--end::Menu wrapper-->
                        </div>
                        <!--end::User menu-->
                        
                        <!--begin::Aside toggle-->
                        <!--end::Header menu toggle-->
                    </div>
                    <!--end::Navbar-->
                </div>
                <!--end::Header wrapper-->
            </div>
            <!--end::Header container-->
        </div>
        <!--end::Header-->
        <!--begin::Wrapper-->
        <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
            
            <!--begin::Main-->
            <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                <!--begin::Content wrapper-->
                <div class="d-flex flex-column flex-column-fluid">
                    
                    <!--begin::Content-->
                    <div id="kt_app_content" class="app-content flex-column-fluid">
                        <!--begin::Content container-->
                        <div id="kt_app_content_container" class="app-container container-fluid">
                            <!-- Loading State -->
                            <div *ngIf="loading" class="text-center py-10">
                                <div class="spinner-border text-primary" role="status">
                                  <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mt-3 text-muted">Loading profile...</p>
                            </div>
                            
                            <!-- Error State -->
                            <div *ngIf="error && !loading" class="alert alert-danger">{{ error }}</div>
                            
                            <!-- Profile Content - Only show when user data is loaded -->
                            <div *ngIf="!loading && user">
                                <div class="row g-5 gx-xl-10 mb-5 mb-xl-10">
                                    <div class="card border-transparent" data-bs-theme="light" style="background-color: #1800ad; background-image: url('assets/background.png'); background-position: center center; background-size: cover; background-repeat: no-repeat;">
                                        <div class="card-body pt-9 pb-0">
                                            <div class="d-flex flex-wrap flex-sm-nowrap mb-6">
                                                <div class="me-7">
                                                    <img [src]="user?.avatarUrl || '/assets/pixelsicon.png'" alt="Organization Logo" class="w-200px h-200px rounded">
                                                </div>
                                                <div class="flex-grow-1">
                                                    <div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
                                                        <div class="d-flex flex-column mt-10">
                                                            <div class="d-flex flex-column align-items-start mb-5">
                                                              <div class="text-white fs-2 fw-bold mb-2">{{ user?.firstName }} {{ user?.lastName }}</div>
                                                              <span class="badge badge-light-primary">{{ user?.job || 'Employee' }}</span>
                                                            </div>
                                                            
                                                            <div class="d-flex flex-wrap justify-content-start">
                                                              <div class="d-flex flex-wrap">
                                                                <div class="rounded min-w-125px py-3 px-4 me-6 mb-3 stats-card"
                                                                     style="border: 0.5px dashed white; color: white;">
                                                                  <div class="d-flex align-items-center">
                                                                    <div class="fs-4 fw-bold text-white">{{ user?.employeeId }}</div>
                                                                  </div>
                                                                  <div class="fw-semibold fs-6 text-white">Staff ID</div>
                                                                </div>
                                                            
                                                                <div class="rounded min-w-125px py-3 px-4 me-6 mb-3 stats-card"
                                                                     style="border: 0.5px dashed white; color: white;">
                                                                  <div class="d-flex align-items-center">
                                                                    <div class="fs-4 fw-old text-white">{{ user?.department || 'N/A' }}</div>
                                                                  </div>
                                                                  <div class="fw-semibold fs-6 text-white">Department</div>
                                                                </div>
                                                                
                                                                <div class="rounded min-w-125px py-3 px-4 me-6 mb-3 stats-card"
                                                                     style="border: 0.5px dashed white; color: white;">
                                                                  <div class="d-flex align-items-center">
                                                                    <div class="fs-4 fw-old text-white">{{ formatDate(user?.joinedAt) }}</div>
                                                                  </div>
                                                                  <div class="fw-semibold fs-6 text-white">Joined At</div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                  
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                           
                                       <!--begin::Card-->
                                <div class=" row gx-5 gx-xl-10 card card-flush">
                                    <!--begin::Card body-->
                                    <div class="card-body">
                                        <!--begin:::Tabs-->
                                        <ul class="nav nav-tabs nav-line-tabs nav-line-tabs-2x border-transparent fs-4 fw-semibold mb-15">
                                            <!--begin:::Tab item-->
                                            <li class="nav-item">
                                                <a class="nav-link text-active-primary d-flex align-items-center pb-5 active" data-bs-toggle="tab" href="#kt_ecommerce_settings_general">
                                                <i class="ki-outline ki-home fs-2 me-2"></i>Personal Information</a>
                                            </li>
                                            <!--end:::Tab item-->
                                        
                                            
                                        </ul>
                                        <!--end:::Tabs-->
                                        <!--begin:::Tab content-->
                                        <div class="tab-content" id="myTabContent">
                                            <!--begin:::Tab pane-->
                                            <div class="tab-pane fade show active" id="kt_ecommerce_settings_general" role="tabpanel">
                                                <form id="kt_account_settings_form"
                                                class="form fv-plugins-bootstrap5 fv-plugins-framework" novalidate="novalidate">
                                                <div class="card-body p-9">
                                                
                                                    <div class="settings-section mt-5">
                                                        <div class="row mb-8">
                                                            <div class="col-xl-3">
                                                              <div class="fs-6 fw-semibold mt-2 mb-3 required">Profile Picture</div>
                                                            </div>
                                                            <div class="col-lg-8">
                                                              <div class="image-input image-input-outline" data-kt-image-input="true">
                                                                <div class="image-input-wrapper w-125px h-125px bgi-position-center"
                                                                     [style.background-image]="'url(' + (avatarPreview || '/assets/media/avatars/blank.png') + ')'"
                                                                     style="background-size: cover;">
                                                                </div>
                                                                
                                                                <label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow"
                                                                       data-kt-image-input-action="change">
                                                                  <i class="ki-outline ki-pencil fs-7"></i>
                                                                  <input type="file" 
                                                                         accept=".png, .jpg, .jpeg"
                                                                         (change)="onFileSelected($event)">
                                                                </label>
                                                                
                                                                <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow"
                                                                      data-kt-image-input-action="remove"
                                                                      (click)="removeAvatar()">
                                                                  <i class="ki-outline ki-cross fs-2"></i>
                                                                </span>
                                                              </div>
                                                              <div class="form-text">Allowed file types: png, jpg, jpeg. Max size: 2MB</div>
                                                              <div *ngIf="uploadingAvatar" class="text-primary mt-2">
                                                                <span class="spinner-border spinner-border-sm me-2"></span>
                                                                Uploading...
                                                              </div>
                                                            </div>
                                                          </div>
                                                          <div class="row mb-8">
                                                            <div class="col-xl-3">
                                                              <div class="fs-6 fw-semibold mt-2 mb-3 required">Name</div>
                                                            </div>
                                                            <div class="col-xl-9 fv-row">
                                                              <div class="row g-3">
                                                                <div class="col-md-4">
                                                                  <input type="text"
                                                                         class="form-control form-control-solid"
                                                                         [(ngModel)]="profileForm.lastName"
                                                                         name="surname"
                                                                         placeholder="Surname"/>
                                                                </div>
                                                                <div class="col-md-4">
                                                                  <input type="text"
                                                                         class="form-control form-control-solid"
                                                                         [(ngModel)]="profileForm.firstName"
                                                                         name="first_name"
                                                                         placeholder="First Name"/>
                                                                </div>
                                                                <div class="col-md-4">
                                                                  <input type="text"
                                                                         class="form-control form-control-solid"
                                                                         [(ngModel)]="profileForm.middleName"
                                                                         name="other_name"
                                                                         placeholder="Other Name"/>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                          <div class="row mb-8">
                                                            <div class="col-xl-3">
                                                              <div class="fs-6 fw-semibold mt-2 mb-3 required">Email Address</div>
                                                            </div>
                                                            <div class="col-xl-9 fv-row">
                                                              <input type="email"
                                                                     class="form-control form-control-solid"
                                                                     [(ngModel)]="profileForm.email"
                                                                     name="email"
                                                                     placeholder="Email address"
                                                                     [disabled]="true"/>
                                                              <div class="form-text">Email can be changed in the Sign-in Method section below</div>
                                                            </div>
                                                          </div>
                                                          <div class="row mb-8">
                                                            <div class="col-xl-3">
                                                              <div class="fs-6 fw-semibold mt-2 mb-3 required">Phone Number</div>
                                                            </div>
                                                            <div class="col-xl-9 fv-row">
                                                              <input type="tel"
                                                                     class="form-control form-control-solid"
                                                                     [(ngModel)]="profileForm.phoneNumber"
                                                                     name="phone"
                                                                     placeholder="Phone number"/>
                                                            </div>
                                                          </div>
                                                          <div class="row mb-8">
                                                            <div class="col-xl-3">
                                                              <div class="fs-6 fw-semibold mt-2 mb-3 required">Location</div>
                                                            </div>
                                                            <div class="col-xl-9 fv-row">
                                                              <input type="text"
                                                                     class="form-control form-control-solid"
                                                                     [(ngModel)]="profileForm.location"
                                                                     name="location"
                                                                     placeholder="Location"/>
                                                            </div>
                                                          </div>
                                                          <div class="row mb-8">
                                                            <div class="col-xl-3">
                                                              <div class="fs-6 fw-semibold mt-2 mb-3">Skills & Expertise</div>
                                                            </div>
                                                            <div class="col-xl-9 fv-row">
                                                              <div id="student-holiday-list">
                                                                <div class="d-flex mb-3 holiday-item" *ngFor="let skill of skills; let i = index">
                                                                  <input type="text"
                                                                         [value]="skill"
                                                                         class="form-control form-control-solid"
                                                                         placeholder="Skill Name"
                                                                         disabled/>
                                                                  <button type="button"
                                                                          class="btn btn-sm btn-light-danger ms-2"
                                                                          (click)="removeSkill(i)">âœ•</button>
                                                                </div>
                                                                
                                                                <!-- Add new skill input -->
                                                                <div class="d-flex mb-3">
                                                                  <input type="text"
                                                                         [(ngModel)]="newSkill"
                                                                         class="form-control form-control-solid"
                                                                         placeholder="Add new skill"
                                                                         name="newSkill"
                                                                         (keyup.enter)="addSkill()"/>
                                                                </div>
                                                              </div>
                                                              <button type="button"
                                                                      class="btn btn-sm btn-light-primary mt-3"
                                                                      (click)="addSkill()">+ Add New Skill</button>
                                                            </div>
                                                          </div>
                                                    </div>
                                            
                                                </div>
                                              
                                                <div class="card-footer border-0 d-flex justify-content-end py-6 px-9">
                                                    <button type="button"
                                                            class="btn btn-light btn-active-light-primary me-2"
                                                            (click)="resetProfile()"
                                                            [disabled]="savingProfile">Reset Changes</button>
                                                    <button type="button"
                                                            class="btn text-white btn-primary"
                                                            (click)="updateProfile()"
                                                            [disabled]="savingProfile">
                                                      <span class="indicator-label" *ngIf="!savingProfile">Save Changes</span>
                                                      <span class="indicator-progress" *ngIf="savingProfile">
                                                        Please wait...
                                                        <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                                      </span>
                                                    </button>
                                                  </div>
                                            </form>
                                            
                                            </div>

                                            <!--end:::Tab pane-->
                                    
                                        
                                        
                                        </div>
                                        <!--end:::Tab content-->
                                    </div>
                                    <!--end::Card body-->
                                </div>
                                <!--end::Card-->
                                
                                <!--begin::Sign-in Method-->
                                <div class=" row gx-5 gx-xl-10 card card-flush mt-10 card mb-5 mb-xl-10">
                                    <!--begin::Card header-->
                                    <div class="card-header border-0 cursor-pointer" role="button" data-bs-toggle="collapse" data-bs-target="#kt_account_signin_method">
                                        <div class="card-title m-0">
                                            <h3 class="fw-bold m-0">Sign-in Method</h3>
                                        </div>
                                    </div>
                                    <!--end::Card header-->
                                    <!--begin::Content-->
                                    <div id="kt_account_settings_signin_method" class="collapse show">
                                        <!--begin::Card body-->
                                        <div class="card-body border-top p-9">
                                            <!--begin::Email Address-->
                                            <div class="d-flex flex-wrap align-items-center">
                                                <div id="kt_signin_email" [class.d-none]="editingEmail">
                                                  <div class="fs-6 fw-bold mb-1">Email Address</div>
                                                  <div class="fw-semibold text-gray-600">{{ user?.email }}</div>
                                                </div>
                                                
                                                <div id="kt_signin_email_edit" class="flex-row-fluid" [class.d-none]="!editingEmail">
                                                  <form>
                                                    <div class="row mb-6">
                                                      <div class="col-lg-6 mb-4 mb-lg-0">
                                                        <div class="fv-row mb-0">
                                                          <label class="form-label fs-6 fw-bold mb-3">Enter New Email Address</label>
                                                          <input type="email"
                                                                 class="form-control form-control-lg form-control-solid"
                                                                 [(ngModel)]="newEmail"
                                                                 name="emailaddress"
                                                                 placeholder="Email Address"/>
                                                        </div>
                                                      </div>
                                                      <div class="col-lg-6">
                                                        <div class="fv-row mb-0">
                                                          <label class="form-label fs-6 fw-bold mb-3">Confirm Password</label>
                                                          <input type="password"
                                                                 class="form-control form-control-lg form-control-solid"
                                                                 [(ngModel)]="confirmEmailPassword"
                                                                 name="confirmemailpassword"/>
                                                        </div>
                                                      </div>
                                                    </div>
                                                    <div class="d-flex">
                                                      <button type="button"
                                                              class="btn text-white btn-primary me-2 px-6"
                                                              (click)="updateEmail()"
                                                              [disabled]="changingEmail">
                                                        <span *ngIf="!changingEmail">Update Email</span>
                                                        <span *ngIf="changingEmail">
                                                          <span class="spinner-border spinner-border-sm me-2"></span>Updating...
                                                        </span>
                                                      </button>
                                                      <button type="button"
                                                              class="btn btn-color-gray-500 btn-active-light-primary px-6"
                                                              (click)="cancelEmailEdit()">Cancel</button>
                                                    </div>
                                                  </form>
                                                </div>
                                                
                                                <div id="kt_signin_email_button" class="ms-auto" [class.d-none]="editingEmail">
                                                  <button class="btn btn-light btn-active-light-primary"
                                                          (click)="toggleEmailEdit()">Change Email</button>
                                                </div>
                                              </div>
                                            <!--end::Email Address-->
                                            <!--begin::Separator-->
                                            <div class="separator separator-dashed my-6"></div>
                                            <!--end::Separator-->
                                            <!--begin::Password-->
                                            <div class="d-flex flex-wrap align-items-center mb-10">
                                                <div id="kt_signin_password" [class.d-none]="editingPassword">
                                                  <div class="fs-6 fw-bold mb-1">Password</div>
                                                  <div class="fw-semibold text-gray-600">************</div>
                                                </div>
                                                
                                                <div id="kt_signin_password_edit" class="flex-row-fluid" [class.d-none]="!editingPassword">
                                                  <form>
                                                    <div class="row mb-1">
                                                      <div class="col-lg-4">
                                                        <div class="fv-row mb-0">
                                                          <label class="form-label fs-6 fw-bold mb-3">Current Password</label>
                                                          <input type="password"
                                                                 class="form-control form-control-lg form-control-solid"
                                                                 [(ngModel)]="currentPassword"
                                                                 name="currentpassword"/>
                                                        </div>
                                                      </div>
                                                      <div class="col-lg-4">
                                                        <div class="fv-row mb-0">
                                                          <label class="form-label fs-6 fw-bold mb-3">New Password</label>
                                                          <input type="password"
                                                                 class="form-control form-control-lg form-control-solid"
                                                                 [(ngModel)]="newPassword"
                                                                 name="newpassword"/>
                                                        </div>
                                                      </div>
                                                      <div class="col-lg-4">
                                                        <div class="fv-row mb-0">
                                                          <label class="form-label fs-6 fw-bold mb-3">Confirm New Password</label>
                                                          <input type="password"
                                                                 class="form-control form-control-lg form-control-solid"
                                                                 [(ngModel)]="confirmPassword"
                                                                 name="confirmpassword"/>
                                                        </div>
                                                      </div>
                                                    </div>
                                                    <div class="form-text mb-5">Password must be at least 8 characters and contain symbols</div>
                                                    <div class="d-flex">
                                                      <button type="button"
                                                              class="btn text-white btn-primary me-2 px-6"
                                                              (click)="changePassword()"
                                                              [disabled]="changingPassword">
                                                        <span *ngIf="!changingPassword">Update Password</span>
                                                        <span *ngIf="changingPassword">
                                                          <span class="spinner-border spinner-border-sm me-2"></span>Updating...
                                                        </span>
                                                      </button>
                                                      <button type="button"
                                                              class="btn btn-color-gray-500 btn-active-light-primary px-6"
                                                              (click)="cancelPasswordEdit()">Cancel</button>
                                                    </div>
                                                  </form>
                                                </div>
                                                
                                                <div id="kt_signin_password_button" class="ms-auto" [class.d-none]="editingPassword">
                                                  <button class="btn btn-light btn-active-light-primary"
                                                          (click)="togglePasswordEdit()">Reset Password</button>
                                                </div>
                                              </div>
                                              
                                            <!--end::Password-->
                                            <!--begin::Notice-->
                                            <!-- <div class="notice d-flex bg-light-primary rounded border-primary border border-dashed p-6">
                                                <!--begin::Icon-->
                                                <i class="ki-outline ki-shield-tick fs-2tx text-primary me-4"></i>
                                                <!--end::Icon-->
                                                <!--begin::Wrapper-->
                                                <!-- <div class="d-flex flex-stack flex-grow-1 flex-wrap flex-md-nowrap"> -->
                                                    <!--begin::Content-
                                                    <div class="mb-3 mb-md-0 fw-semibold">
                                                        <h4 class="text-gray-900 fw-bold">Secure Your Account</h4>
                                                        <div class="fs-6 text-gray-700 pe-7">Two-factor authentication adds an extra layer of security to your account. To log in, in addition you'll need to provide a 6 digit code</div>
                                                    </div>
                                                    <!--end::Content-
                                                    
                                                </div>
                                                <!--end::Wrapper--
                                            </div> -->
                                            <!--end::Notice-->
                                        </div>
                                        <!--end::Card body-->
                                    </div>
                                    <!--end::Content-->
                                </div>
                                <!--end::Sign-in Method-->
                            </div><!-- End of *ngIf="!loading && user" -->
                       </div>   
                       </div>
                </div>
            </div>
                <!--end::Content-->
        </div>
                <!--end::Content wrapper-->
                <!--begin::Footer-->
                <div id="kt_app_footer" class="app-footer">
                    <!--begin::Footer container-->
                    <div class="app-container container-fluid d-flex flex-column flex-md-row flex-center flex-md-stack py-3">
                        <!--begin::Copyright-->
                        <div class="text-gray-900 order-2 order-md-1">
                            <span class="text-muted fw-semibold me-1">2025&copy;</span>
                            <a href="#" target="_blank" class="text-gray-800 text-hover-primary">Swift - Office Productivity App</a>
                        </div>
                        <!--end::Copyright-->
                        <!--begin::Menu-->
                        <ul class="menu menu-gray-600 menu-hover-primary fw-semibold order-1">
                            <li class="menu-item">
                                <a href="#" target="_blank" class="menu-link px-2">About</a>
                            </li>
                            <li class="menu-item">
                                <a href="#" target="_blank" class="menu-link px-2">Support</a>
                            </li>
                            
                        </ul>
                        <!--end::Menu-->
                    </div>
                    <!--end::Footer container-->
                </div>
                <!--end::Footer-->
            </div>
            <!--end:::Main-->
</div>