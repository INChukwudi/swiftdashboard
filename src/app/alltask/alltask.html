	<!--begin::App-->
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
        <!--begin::Page-->
        <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
            <!--begin::Header-->
            <div id="kt_app_header" class="app-header" data-kt-sticky="true" data-kt-sticky-activate="{default: true, lg: true}" data-kt-sticky-name="app-header-minimize" data-kt-sticky-offset="{default: '200px', lg: '0'}" data-kt-sticky-animation="false">
                <!--begin::Header container-->
                <div class="app-container container-fluid d-flex align-items-stretch justify-content-between" id="kt_app_header_container">
                    <!--begin::Sidebar mobile toggle-->
                    <div class="d-flex align-items-center d-lg-none ms-n3 me-1 me-md-2" title="Show sidebar menu">
                        <div class="btn btn-icon btn-active-color-primary w-35px h-35px" id="kt_app_sidebar_mobile_toggle">
                            <i class="ki-duotone ki-abstract-14 fs-2 fs-md-1">
                                <span class="path1"></span>
                                <span class="path2"></span>
                            </i>
                        </div>
                    </div>
                    <!--end::Sidebar mobile toggle-->
                    <!--begin::Mobile logo-->
                    <div class="d-flex align-items-center flex-grow-1 flex-lg-grow-0">
                        <a href="index.html" class="d-lg-none">
                            <img alt="Logo" src="assets/swiftlogo.png" class="h-30px" />
                        </a>
                    </div>
                    <!--end::Mobile logo-->
                    <!--begin::Header wrapper-->
                    <div class="d-flex align-items-stretch justify-content-between flex-lg-grow-1" id="kt_app_header_wrapper">
                        <!--begin::Menu wrapper-->
                        <div class="app-header-menu app-header-mobile-drawer align-items-center" data-kt-drawer="true" data-kt-drawer-name="app-header-menu" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="250px" data-kt-drawer-direction="end" data-kt-drawer-toggle="#kt_app_header_menu_toggle" data-kt-swapper="true" data-kt-swapper-mode="{default: 'append', lg: 'prepend'}" data-kt-swapper-parent="{default: '#kt_app_body', lg: '#kt_app_header_wrapper'}">
                            <h1 class="title">Task Overview</h1>
                        </div>
                        <!--end::Menu wrapper-->
                        <!--begin::Navbar-->
                        <div class="app-navbar flex-shrink-0">
                            <!--begin::Chat-->
                            <div class="app-navbar-item ms-1 ms-md-4">
                                <!--begin::Menu wrapper-->
                                <div class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px position-relative" id="kt_drawer_chat_toggle">
                                    <i class="ki-duotone ki-message-notif fs-2">
                                            <span class="path1"></span>
                                            <span class="path2"></span>
                                            <span class="path3"></span>
                                            <span class="path4"></span>
                                            <span class="path5"></span>
                                    </i>
                                    <span class="bullet bullet-dot bg-success h-6px w-6px position-absolute translate-middle top-0 start-50 animation-blink"></span>
                                </div>
                                <!--end::Menu wrapper-->
                            </div>
                            <!--end::Chat-->
                            
                            <!--begin::Theme mode-->
                            <div class="app-navbar-item ms-1 ms-md-4">
                                <!--begin::Menu toggle-->
                                <a href="#" class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px" data-kt-menu-trigger="{default:'click', lg: 'hover'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
                                    <i class="ki-duotone ki-night-day theme-light-show fs-1">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                        <span class="path3"></span>
                                        <span class="path4"></span>
                                        <span class="path5"></span>
                                        <span class="path6"></span>
                                        <span class="path7"></span>
                                        <span class="path8"></span>
                                        <span class="path9"></span>
                                        <span class="path10"></span>
                                    </i>
                                    <i class="ki-duotone ki-moon theme-dark-show fs-1">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                    </i>
                                </a>
                                <!--begin::Menu toggle-->
                                <!--begin::Menu-->
                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-gray-500 menu-active-bg menu-state-color fw-semibold py-4 fs-base w-150px" data-kt-menu="true" data-kt-element="theme-mode-menu">
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-3 my-0">
                                        <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="light">
                                            <span class="menu-icon" data-kt-element="icon">
                                                <i class="ki-duotone ki-night-day fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                    <span class="path4"></span>
                                                    <span class="path5"></span>
                                                    <span class="path6"></span>
                                                    <span class="path7"></span>
                                                    <span class="path8"></span>
                                                    <span class="path9"></span>
                                                    <span class="path10"></span>
                                                </i>
                                            </span>
                                            <span class="menu-title">Light</span>
                                        </a>
                                    </div>
                                    <!--end::Menu item-->
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-3 my-0">
                                        <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="dark">
                                            <span class="menu-icon" data-kt-element="icon">
                                                <i class="ki-duotone ki-moon fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                </i>
                                            </span>
                                            <span class="menu-title">Dark</span>
                                        </a>
                                    </div>
                                    <!--end::Menu item-->
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-3 my-0">
                                        <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="system">
                                            <span class="menu-icon" data-kt-element="icon">
                                                <i class="ki-duotone ki-screen fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                    <span class="path4"></span>
                                                </i>
                                            </span>
                                            <span class="menu-title">System</span>
                                        </a>
                                    </div>
                                    <!--end::Menu item-->
                                </div>
                                <!--end::Menu-->
                            </div>
                            <!--end::Theme mode-->
                            <!--begin::User menu-->
                            <div class="app-navbar-item ms-1 ms-md-4" id="kt_header_user_menu_toggle">
                                <!--begin::Menu wrapper-->
                                <div class="cursor-pointer symbol symbol-35px" data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
                                    <img src="assets/pixelsicon.png" class="rounded-3" alt="user" />
                                </div>
                                <!--begin::User account menu-->
                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-275px" data-kt-menu="true">
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-3">
                                        <div class="menu-content d-flex align-items-center px-3">
                                            <!--begin::Avatar-->
                                            <div class="symbol symbol-50px me-5">
                                                <img alt="Logo" src="assets/pixelsicon.png" />
                                            </div>
                                            <!--end::Avatar-->
                                            <!--begin::Username-->
                                            <div class="d-flex flex-column">
                                                <div class="fw-bold d-flex align-items-center fs-5">Pixels Solutiin Ltd
                                                <span class="badge badge-light-success fw-bold fs-8 px-2 py-1 ms-2">Pro</span></div>
                                                
                                            </div>
                                            <!--end::Username-->
                                        </div>
                                    </div>
                                    <!--end::Menu item-->
                                    
                                    <!--begin::Menu separator-->
                                    <div class="separator my-2"></div>
                                    <!--end::Menu separator-->
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-5" data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-placement="left-start" data-kt-menu-offset="-15px, 0">
                                        <a href="#" class="menu-link px-5">
                                            <span class="menu-title position-relative">Mode 
                                            <span class="ms-5 position-absolute translate-middle-y top-50 end-0">
                                                <i class="ki-duotone ki-night-day theme-light-show fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                    <span class="path4"></span>
                                                    <span class="path5"></span>
                                                    <span class="path6"></span>
                                                    <span class="path7"></span>
                                                    <span class="path8"></span>
                                                    <span class="path9"></span>
                                                    <span class="path10"></span>
                                                </i>
                                                <i class="ki-duotone ki-moon theme-dark-show fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                </i>
                                            </span></span>
                                        </a>
                                        <!--begin::Menu-->
                                        <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-gray-500 menu-active-bg menu-state-color fw-semibold py-4 fs-base w-150px" data-kt-menu="true" data-kt-element="theme-mode-menu">
                                            <!--begin::Menu item-->
                                            <div class="menu-item px-3 my-0">
                                                <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="light">
                                                    <span class="menu-icon" data-kt-element="icon">
                                                        <i class="ki-duotone ki-night-day fs-2">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                            <span class="path3"></span>
                                                            <span class="path4"></span>
                                                            <span class="path5"></span>
                                                            <span class="path6"></span>
                                                            <span class="path7"></span>
                                                            <span class="path8"></span>
                                                            <span class="path9"></span>
                                                            <span class="path10"></span>
                                                        </i>
                                                    </span>
                                                    <span class="menu-title">Light</span>
                                                </a>
                                            </div>
                                            <!--end::Menu item-->
                                            <!--begin::Menu item-->
                                            <div class="menu-item px-3 my-0">
                                                <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="dark">
                                                    <span class="menu-icon" data-kt-element="icon">
                                                        <i class="ki-duotone ki-moon fs-2">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                        </i>
                                                    </span>
                                                    <span class="menu-title">Dark</span>
                                                </a>
                                            </div>
                                            <!--end::Menu item-->
                                            <!--begin::Menu item-->
                                            <div class="menu-item px-3 my-0">
                                                <a href="#" class="menu-link px-3 py-2" data-kt-element="mode" data-kt-value="system">
                                                    <span class="menu-icon" data-kt-element="icon">
                                                        <i class="ki-duotone ki-screen fs-2">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                            <span class="path3"></span>
                                                            <span class="path4"></span>
                                                        </i>
                                                    </span>
                                                    <span class="menu-title">System</span>
                                                </a>
                                            </div>
                                            <!--end::Menu item-->
                                        </div>
                                        <!--end::Menu-->
                                    </div>
                                    <!--end::Menu item-->
                                
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-5 my-1">
                                        <a href="#" class="menu-link px-5">Account Settings</a>
                                    </div>
                                    <!--end::Menu item-->
                                    <!--begin::Menu item-->
                                    <div class="menu-item px-5">
                                        <a href="#" class="menu-link px-5">Sign Out</a>
                                    </div>
                                    <!--end::Menu item-->
                                </div>
                                <!--end::User account menu-->
                                <!--end::Menu wrapper-->
                            </div>
                            <!--end::User menu-->
                            
                            <!--begin::Aside toggle-->
                            <!--end::Header menu toggle-->
                        </div>
                        <!--end::Navbar-->
                    </div>
                    <!--end::Header wrapper-->
                </div>
                <!--end::Header container-->
            </div>
            <!--end::Header-->
            <!--begin::Wrapper-->
            <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
      
                <!--begin::Main-->
                <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                    <!--begin::Content wrapper-->
                    <div class="d-flex flex-column flex-column-fluid">
                        
                        <!--begin::Content-->
                        <div id="kt_app_content" class="app-content flex-column-fluid">
                            <!--begin::Content container-->
                            <div id="kt_app_content_container" class="app-container container-fluid">
                                <div class="row g-5 gx-xl-10 mb-5 mb-xl-10">
                                    <div class="card border-transparent" data-bs-theme="light" style="background-color: #0062e5; background-image: url('assets/background.png'); background-position: center center; background-size: cover; background-repeat: no-repeat;">
                                      <!--begin::Body-->
                                      <div class="card-body ps-xl-15 py-10">
                                        
                                        <!--begin::Header-->
                                        <div class="d-flex justify-content-between align-items-start mb-4">
                                        
                                        </div>
                                        <!--end::Header-->
                                  
                                        <!--begin::Stats Row-->
                                        <div class="row g-6 mb-8">
                                        
                                          <!-- Total Tasks -->
                                          <div class="col-md-3 col-6">
                                            <div class="glass-card rounded p-5">
                                              <div class="d-flex align-items-center mb-2">
                                                <i class="ki-outline ki-check-circle fs-2x text-white me-3"></i>
                                                <!-- Show spinner while loading, number when loaded -->
                                                <span class="fs-2hx fw-bold text-white" *ngIf="!isLoadingStats">{{ globalStats.total }}</span>
                                                <div class="spinner-border spinner-border-sm text-white" *ngIf="isLoadingStats" role="status">
                                                  <span class="visually-hidden">Loading...</span>
                                                </div>
                                              </div>
                                              <span class="text-white fs-6 fw-semibold opacity-75">Total Tasks</span>
                                            </div>
                                          </div>
                                        
                                          <!-- Completed -->
                                          <div class="col-md-3 col-6">
                                            <div class="glass-card rounded p-5">
                                              <div class="d-flex align-items-center mb-2">
                                                <i class="ki-outline ki-timer fs-2x text-white me-3"></i>
                                                <!-- Show spinner while loading, number when loaded -->
                                                <span class="fs-2hx fw-bold text-white" *ngIf="!isLoadingStats">{{ globalStats.completed }}</span>
                                                <div class="spinner-border spinner-border-sm text-white" *ngIf="isLoadingStats" role="status">
                                                  <span class="visually-hidden">Loading...</span>
                                                </div>
                                              </div>
                                              <span class="text-white fs-6 fw-semibold opacity-75">Completed</span>
                                            </div>
                                          </div>
                                        
                                          <!-- In Progress -->
                                          <div class="col-md-3 col-6">
                                            <div class="glass-card rounded p-5">
                                              <div class="d-flex align-items-center mb-2">
                                                <i class="ki-outline ki-profile-user fs-2x text-white me-3"></i>
                                                <!-- Show spinner while loading, number when loaded -->
                                                <span class="fs-2hx fw-bold text-white" *ngIf="!isLoadingStats">{{ globalStats.inProgress }}</span>
                                                <div class="spinner-border spinner-border-sm text-white" *ngIf="isLoadingStats" role="status">
                                                  <span class="visually-hidden">Loading...</span>
                                                </div>
                                              </div>
                                              <span class="text-white fs-6 fw-semibold opacity-75">In Progress</span>
                                            </div>
                                          </div>
                                        
                                          <!-- Overdue -->
                                          <div class="col-md-3 col-6">
                                            <div class="glass-card rounded p-5">
                                              <div class="d-flex align-items-center mb-2">
                                                <i class="ki-outline ki-rocket fs-2x text-white me-3"></i>
                                                <!-- Show spinner while loading, number when loaded -->
                                                <span class="fs-2hx fw-bold text-white" *ngIf="!isLoadingStats">{{ globalStats.overdue }}</span>
                                                <div class="spinner-border spinner-border-sm text-white" *ngIf="isLoadingStats" role="status">
                                                  <span class="visually-hidden">Loading...</span>
                                                </div>
                                              </div>
                                              <span class="text-white fs-6 fw-semibold opacity-75">Overdue</span>
                                            </div>
                                          </div>
                                        
                                        </div>
                                        <!--end::Stats Row-->
                                        
                                      </div>
                                      <!--end::Body-->
                                    </div>
                                    
                                    <style>
                                      .glass-card {
                                        background: rgba(255, 255, 255, 0.1);
                                        backdrop-filter: blur(10px);
                                        -webkit-backdrop-filter: blur(10px);
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
                                        transition: all 0.3s ease;
                                      }
                                      
                                      .glass-card:hover {
                                        background: rgba(255, 255, 255, 0.15);
                                        transform: translateY(-5px);
                                        box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.15);
                                      }
                                      
                                      /* Enhanced spinner styling for stats cards */
                                      .glass-card .spinner-border-sm {
                                        width: 2.5rem;
                                        height: 2.5rem;
                                        border-width: 0.2em;
                                      }
                                    </style>
                                  </div>
                       
        


<div class="card">
    <div class="card-header border-0 pt-6">
      <div class="card-title">
        <h2>Manage Your Tasks</h2>
      </div>
      
      <div class="d-flex align-items-center gap-3 flex-wrap">
        <!-- View Toggle Buttons -->
        <ul class="nav nav-pills mb-0">
          <li class="nav-item m-0">
            <button 
              class="btn btn-sm btn-icon me-2" 
              [ngClass]="{'btn-outline-primary active': selectedTab === 'card', 'btn-outline-primary': selectedTab !== 'card'}"
              (click)="selectTab('card')" 
              title="Table View">
              <i class="bi bi-list-ul fs-4"></i>
            </button>
          </li>
          
          <li class="nav-item m-0">
            <button 
              class="btn btn-sm btn-icon" 
              [ngClass]="{'btn-outline-primary active': selectedTab === 'table', 'btn-outline-primary': selectedTab !== 'table'}"
              (click)="selectTab('table')" 
              title="Card View">
              <i class="bi bi-grid-3x3-gap-fill fs-4"></i>
            </button>
          </li> 
        </ul>
  
        <!-- Search Input -->
        <div class="position-relative">
          <input 
            type="text" 
            class="form-control form-control-solid mw-300px ps-10" 
            placeholder="Search tasks..." 
            [(ngModel)]="searchTerm"
            (input)="onSearchChange($event.target.value)" />
          <i class="ki-outline ki-magnifier fs-3 position-absolute top-50 translate-middle-y ms-3"></i>
          <button 
            *ngIf="searchTerm" 
            type="button" 
            class="btn btn-sm btn-icon btn-active-light-primary position-absolute top-50 end-0 translate-middle-y me-1"
            (click)="clearSearch()">
            <i class="ki-outline ki-cross fs-4"></i>
          </button>
        </div>
        
        <!-- Date Range Filter -->
        <!-- <div class="position-relative">
          <div class="d-flex align-items-center gap-2">
            <div class="position-relative">
              <i class="ki-outline ki-calendar fs-3 position-absolute top-50 translate-middle-y ms-3" style="z-index: 5; pointer-events: none;"></i>
              <input 
                type="text" 
                class="form-control form-control-solid mw-300px ps-12" 
                placeholder="Select date range (e.g., Jan 1, 2025 to Dec 31, 2025)" 
                [value]="dateRangeDisplay"
                readonly
                style="cursor: pointer;"
                #flatpickrInput />
            </div>
            <button 
              *ngIf="dateRangeDisplay" 
              type="button" 
              class="btn btn-sm btn-icon btn-light-danger"
              (click)="clearDateFilter()"
              title="Clear date filter">
              <i class="ki-outline ki-cross fs-4"></i>
            </button>
          </div>
        </div> -->
          
      
        <a href="#" class="btn btn-primary btn-sm text-white fw-bolder" 
        data-bs-toggle="modal" 
        data-bs-target="#kt_modal_new_target">
       <i class="ki-outline ki-plus fs-4"></i>
       Assign New Task
     </a>
      </div>
    </div>
    
    <div class="card-body py-4">
      <!-- Loading state -->
      <div *ngIf="isLoading" class="text-center py-10">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      
      <!-- Results Count -->
      <div *ngIf="!isLoading && (searchTerm || dateRangeDisplay)" class="mb-4">
        <div class="d-flex align-items-center gap-2">
          <span class="badge badge-light-primary">
            {{tasks.length}} of {{totalItems}} tasks
          </span>
          <span *ngIf="searchTerm" class="text-muted fs-7">
            matching "{{searchTerm}}"
          </span>
          <span *ngIf="dateRangeDisplay" class="text-muted fs-7">
            in date range {{dateRangeDisplay}}
          </span>
          <span class="text-muted fs-7">
            â€¢ sorted by most recent
          </span>
        </div>
      </div>
      
      <!-- Sort indicator when no filters -->
      <div *ngIf="!isLoading && !searchTerm && !dateRangeDisplay && tasks.length > 0" class="mb-4">
        <div class="d-flex align-items-center gap-2">
          <span class="badge badge-light-info">
            <i class="ki-outline ki-sort-down fs-6"></i>
            Showing {{tasks.length}} tasks sorted by most recent
          </span>
        </div>
      </div>
      
      <!-- Table View -->
      <div *ngIf="!isLoading && selectedTab === 'card'" class="tab-pane fade show active">
        <div class="table-responsive">
          <table class="table table-row-bordered table-row-dashed gy-4 align-middle fw-bold">
            <thead class="fs-7 text-gray-400 text-uppercase">
              <tr>
                <th class="min-w-250px">Task</th>
                <th class="min-w-90px">Project</th>
                <th class="min-w-90px">Start Date</th>
                <th class="min-w-90px">Due Date</th>
                <th class="min-w-90px">Assigned By</th>
                <th class="min-w-90px">Collaborators</th>
                <th class="min-w-70px">Progress</th>
                <th class="min-w-90px">Status</th>
                <th class="min-w-50px text-end">Actions</th>
              </tr>
            </thead>
            <tbody class="fs-6">
              <tr *ngFor="let task of tasks; trackBy: trackByTaskId">
                <td class="fw-bold">
                  <a href="#" class="text-gray-900 text-hover-primary" (click)="openTaskDrawer(task); $event.preventDefault()">
                    {{task.title}}
                  </a>
                </td>
                <td>
                  <span class="badge badge-light-primary fw-semibold">{{ getProjectName(task) }}</span>
                </td>
                <td><span class="text-dark">{{formatDate(task.startDate)}}</span></td>
                <td><span class="text-dark">{{formatDate(task.dueDate)}}</span></td>
                
                <!-- Assigned By Column -->
                <td>
                  <div class="d-flex align-items-center" *ngIf="task.assignee">
                    <div class="symbol symbol-35px symbol-circle me-3">
                      <img 
                        *ngIf="task.assignee.avatarUrl"
                        [src]="task.assignee.avatarUrl" 
                        [alt]="task.assignee.firstName + ' ' + task.assignee.lastName"
                        class="object-fit-cover rounded-circle">
                      <span 
                        *ngIf="!task.assignee.avatarUrl"
                        class="symbol-label bg-primary text-inverse-primary fw-bold">
                        {{getInitials(task.assignee.firstName, task.assignee.lastName)}}
                      </span>
                    </div>
                    <div class="fw-semibold">
                      <div class="text-gray-900 fw-bold fs-6">
                        {{ task.assignee.firstName }} {{ task.assignee.lastName }}
                      </div>
                    </div>
                  </div>
                  <span class="text-muted" *ngIf="!task.assignee">Not assigned</span>
                </td>
                
                <!-- Collaborators Column -->
                <td>
                  <div class="symbol-group symbol-hover fs-8" *ngIf="task.collaborators && task.collaborators.length > 0">
                    <div 
                      class="symbol symbol-25px symbol-circle" 
                      *ngFor="let collab of task.collaborators | slice:0:4"
                      [attr.data-bs-toggle]="'tooltip'"
                      [attr.title]="collab.firstName + ' ' + collab.lastName">
                      <img 
                        *ngIf="collab.avatarUrl" 
                        [src]="collab.avatarUrl" 
                        [alt]="collab.firstName"
                        class="object-fit-cover">
                      <span 
                        *ngIf="!collab.avatarUrl" 
                        class="symbol-label bg-primary text-inverse-primary fw-bold">
                        {{ getInitials(collab.firstName, collab.lastName) }}
                      </span>
                    </div>
                    
                    <div 
                      class="symbol symbol-25px symbol-circle" 
                      *ngIf="task.collaborators.length > 4"
                      data-bs-toggle="tooltip"
                      [attr.title]="(task.collaborators.length - 4) + ' more'">
                      <span class="symbol-label bg-light text-gray-600 fw-bold">
                        +{{ task.collaborators.length - 4 }}
                      </span>
                    </div>
                  </div>
                  <span class="text-muted" *ngIf="!task.collaborators || task.collaborators.length === 0">
                    None
                  </span>
                </td>
  
                <!-- Progress Column -->
                <td>
                  <div class="d-flex flex-column">
                  
                    <div class="progress h-6px w-100px">
                      <div 
                        class="progress-bar"
                        [class.bg-success]="task.progress === 100"
                        [class.bg-primary]="task.progress >= 50 && task.progress < 100"
                        [class.bg-warning]="task.progress < 50"
                        [style.width.%]="task.progress"
                        role="progressbar"></div>
                    </div>
                  </div>
                </td>
                
                <td>
                  <span class="badge fw-bold" [ngClass]="getStatusBadgeClass(task.status)">
                    {{task.status}}
                  </span>
                </td>
                <td class="text-end">
                  <button class="btn btn-bg-light btn-active-color-primary btn-sm" 
                          (click)="openTaskDrawer(task)">
                    View
                  </button>
                </td>
              </tr>
              
              <!-- Empty state -->
              <tr *ngIf="tasks.length === 0">
                <td colspan="9" class="text-center py-10">
                  <div class="text-gray-600">
                    <i class="ki-outline ki-search-list fs-3x text-gray-400 mb-3"></i>
                    <div class="fs-5 fw-semibold">
                      {{ searchTerm || dateRangeDisplay ? 'No tasks found matching your filters' : 'No tasks found. Create your first task to get started!' }}
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Card View -->
      <div *ngIf="!isLoading && selectedTab === 'table'" class="tab-pane fade show active">
        <div class="row g-6">
          
          <!-- Loop through all tasks -->
          <div class="col-md-6 col-xl-4" *ngFor="let task of tasks; trackBy: trackByTaskId">
            <div 
              class="card mb-6 drag-item border-hover-primary cursor-pointer h-100" 
              draggable="true" 
              [attr.data-card-id]="task.id"
              (click)="openTaskDrawer(task)">
              <div class="card-body py-6 d-flex flex-column">
  
                <!-- Top Row -->
                <div class="d-flex justify-content-between align-items-center mb-5">
                  <span class="badge fw-bold fs-7" [ngClass]="getStatusBadgeClass(task.status)">
                    {{task.status}}
                  </span>
                </div>
  
                <!-- Header -->
                <div class="mb-5">
                  <a href="#" class="fs-4 fw-bold text-gray-900 mb-3 text-hover-primary d-block" (click)="$event.preventDefault()">
                    {{task.title}}
                  </a>
                  <span class="badge badge-light-primary fw-semibold fs-7">
                    {{getProjectName(task)}}
                  </span>
                </div>
  
                <div class="separator separator-dashed my-6"></div>
  
                <!-- Assigned By -->
                <div class="d-flex align-items-center mb-6">
                  <span class="text-gray-600 fw-semibold fs-7 me-3">Assigned by:</span>
                  <div class="d-flex align-items-center" *ngIf="task.assignee">
                    <div class="symbol symbol-30px symbol-circle me-2">
                      <img 
                        *ngIf="task.assignee.avatarUrl" 
                        [src]="task.assignee.avatarUrl" 
                        [alt]="task.assignee.firstName + ' ' + task.assignee.lastName"
                        class="object-fit-cover">
                      <span 
                        *ngIf="!task.assignee.avatarUrl"
                        class="symbol-label bg-info text-inverse-info fw-bold fs-7">
                        {{getInitials(task.assignee.firstName, task.assignee.lastName)}}
                      </span>
                    </div>
                    <span class="fw-bold text-gray-800 fs-7">
                      {{task.assignee.firstName}} {{task.assignee.lastName}}
                    </span>
                  </div>
                  <span class="text-muted fs-7" *ngIf="!task.assignee">Not assigned</span>
                </div>
  
                <!-- Dates -->
                <div class="d-flex justify-content-between mb-4">
                  <div class="d-flex align-items-center">
                    <i class="ki-outline ki-calendar fs-5 text-gray-600 me-2"></i>
                    <span class="text-gray-600 fw-semibold fs-7 me-2">Start:</span>
                    <span class="fw-bold text-gray-800 fs-7">{{formatDate(task.startDate)}}</span>
                  </div>
                  <div class="d-flex align-items-center">
                    <i class="ki-outline ki-calendar fs-5 text-danger me-2"></i>
                    <span class="text-gray-600 fw-semibold fs-7 me-2">Due:</span>
                    <span class="fw-bold text-gray-800 fs-7">{{formatDate(task.dueDate)}}</span>
                  </div>
                </div>
  
                <div class="separator separator-dashed my-6"></div>
  
                <!-- Progress -->
                <div class="mb-6">
                  <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="fs-7 fw-bold text-gray-700">Progress</span>
                    <span class="badge fs-8 fw-bold"
                          [class.badge-light-success]="task.progress === 100"
                          [class.badge-light-primary]="task.progress >= 50 && task.progress < 100"
                          [class.badge-light-warning]="task.progress < 50">
                      {{task.progress}}%
                    </span>
                  </div>
                  <div class="h-6px w-100 bg-light rounded">
                    <div 
                      class="rounded h-6px" 
                      [class.bg-success]="task.progress === 100"
                      [class.bg-primary]="task.progress >= 50 && task.progress < 100"
                      [class.bg-warning]="task.progress < 50"
                      role="progressbar" 
                      [style.width.%]="task.progress" 
                      [attr.aria-valuenow]="task.progress" 
                      aria-valuemin="0" 
                      aria-valuemax="100">
                    </div>
                  </div>
                </div>
  
                <div class="separator separator-dashed my-6"></div>
  
                <!-- Footer -->
                <div class="d-flex justify-content-between align-items-center mt-auto">
                  <!-- Collaborators -->
                  <div>
                    <span class="text-gray-600 fw-semibold fs-7 mb-2 d-block">
                      Collaborators ({{task.collaborators?.length || 0}})
                    </span>
                    <div class="symbol-group symbol-hover" *ngIf="task.collaborators && task.collaborators.length > 0">
                      <div 
                        class="symbol symbol-35px symbol-circle" 
                        *ngFor="let collab of task.collaborators | slice:0:3"
                        [attr.data-bs-toggle]="'tooltip'"
                        [attr.title]="collab.firstName + ' ' + collab.lastName">
                        <img 
                          *ngIf="collab.avatarUrl" 
                          [src]="collab.avatarUrl" 
                          [alt]="collab.firstName">
                        <span 
                          *ngIf="!collab.avatarUrl"
                          class="symbol-label bg-primary text-inverse-primary fw-bold">
                          {{getInitials(collab.firstName, collab.lastName)}}
                        </span>
                      </div>
                      <div 
                        class="symbol symbol-35px symbol-circle" 
                        *ngIf="task.collaborators.length > 3"
                        data-bs-toggle="tooltip"
                        [attr.title]="(task.collaborators.length - 3) + ' more'">
                        <span class="symbol-label bg-dark text-gray-300 fs-7 fw-bold">
                          +{{task.collaborators.length - 3}}
                        </span>
                      </div>
                    </div>
                    <span class="text-muted fs-7" *ngIf="!task.collaborators || task.collaborators.length === 0">
                      None
                    </span>
                  </div>
  
                  <!-- Stats -->
                  <div class="d-flex gap-2">
                    <!-- Attachments -->
                    <div class="border border-dashed border-gray-300 rounded d-flex align-items-center py-2 px-3"
                         [title]="task.attachmentCount + ' attachment(s)'">
                      <i class="ki-outline ki-paper-clip fs-4 text-gray-600"></i>
                      <span class="ms-1 fs-7 fw-bold text-gray-600">{{task.attachmentCount}}</span>
                    </div>
                    
                    <!-- Comments -->
                    <div class="border border-dashed border-gray-300 d-flex align-items-center rounded py-2 px-3"
                         [title]="task.commentCount + ' comment(s)'">
                      <i class="ki-outline ki-message-text-2 fs-4 text-gray-600"></i>
                      <span class="ms-1 fs-7 fw-bold text-gray-600">{{task.commentCount}}</span>
                    </div>
                  </div>
                </div>
  
              </div>
            </div>
          </div>
  
          <!-- Empty State -->
          <div class="col-12" *ngIf="tasks.length === 0">
            <div class="text-center py-10">
              <i class="ki-outline ki-search-list fs-3x text-gray-400 mb-3"></i>
              <div class="text-gray-600 fs-4">
                {{ searchTerm || dateRangeDisplay ? 'No tasks found matching your filters' : 'No tasks found. Create your first task to get started!' }}
              </div>
            </div>
          </div>
  
        </div>
      </div>
  
      <!-- Pagination -->
      <div class="mt-8" *ngIf="!isLoading && totalItems > pageSize">
        <mat-paginator 
          [length]="totalItems"
          [pageSize]="pageSize"
          [pageSizeOptions]="[50, 100, 200, 500]"
          (page)="onPageChange($event)"
          showFirstLastButtons>
        </mat-paginator>
      </div>
    </div>
  </div>
  
  <!-- Task Drawer Component -->
  <app-task-drawer 
    [isOpen]="isDrawerOpen"
    [task]="selectedTask"
    (closeDrawer)="closeTaskDrawer()"
    (taskUpdated)="onTaskUpdated($event)"
    (taskDeleted)="onTaskDeleted($event)">
  </app-task-drawer>
  
  <!-- New Task Modal Component -->
  <app-new-task 
    [projects]="projects"
    (taskCreated)="onTaskCreated($event)">
  </app-new-task>
  
  <style>
  .cursor-pointer {
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .cursor-pointer:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  
  .border-hover-primary:hover {
    border-color: #3699FF !important;
  }
  
  /* Flatpickr Custom Styling */
  .flatpickr-calendar {
    box-shadow: 0 0.5rem 1.5rem 0.5rem rgba(0, 0, 0, 0.075) !important;
    border: 1px solid #e4e6ef !important;
    border-radius: 0.475rem !important;
    font-family: inherit !important;
  }
  
  .flatpickr-months {
    background: #f5f8fa !important;
    border-bottom: 1px solid #e4e6ef !important;
    border-radius: 0.475rem 0.475rem 0 0 !important;
    padding: 0.5rem 0 !important;
  }
  
  .flatpickr-current-month {
    font-size: 1rem !important;
    font-weight: 600 !important;
    color: #181c32 !important;
    padding: 0.5rem 0 !important;
  }
  
  .flatpickr-monthDropdown-months {
    font-size: 1rem !important;
    font-weight: 600 !important;
    padding: 0.25rem 0.5rem !important;
    border: 1px solid #e4e6ef !important;
    border-radius: 0.375rem !important;
    background: white !important;
    margin-right: 0.5rem !important;
  }
  
  /* Make year input more prominent and easier to change */
  .numInputWrapper {
    border: 1px solid #e4e6ef !important;
    border-radius: 0.375rem !important;
    overflow: hidden !important;
    background: white !important;
    min-width: 70px !important;
  }
  
  .numInputWrapper input {
    font-weight: 600 !important;
    color: #181c32 !important;
    font-size: 1rem !important;
    padding: 0.25rem 0.5rem !important;
    text-align: center !important;
  }
  
  .numInputWrapper:hover {
    background: #f5f8fa !important;
    border-color: #3699FF !important;
    cursor: pointer !important;
  }
  
  .numInputWrapper span {
    border-left: 1px solid #e4e6ef !important;
    background: white !important;
    padding: 0.25rem 0.5rem !important;
  }
  
  .numInputWrapper span:hover {
    background: #3699FF !important;
    color: white !important;
  }
  
  .numInputWrapper span.arrowUp:after,
  .numInputWrapper span.arrowDown:after {
    border-bottom-color: #7e8299 !important;
    border-top-color: #7e8299 !important;
  }
  
  .numInputWrapper span:hover.arrowUp:after,
  .numInputWrapper span:hover.arrowDown:after {
    border-bottom-color: white !important;
    border-top-color: white !important;
  }
  
  .flatpickr-weekday {
    color: #7e8299 !important;
    font-weight: 600 !important;
    font-size: 0.85rem !important;
  }
  
  .flatpickr-day {
    color: #3f4254 !important;
    border-radius: 0.375rem !important;
    font-weight: 500 !important;
  }
  
  .flatpickr-day:hover {
    background: #f5f8fa !important;
    border-color: #f5f8fa !important;
  }
  
  .flatpickr-day.selected {
    background: #3699FF !important;
    border-color: #3699FF !important;
    color: white !important;
  }
  
  .flatpickr-day.startRange,
  .flatpickr-day.endRange {
    background: #3699FF !important;
    border-color: #3699FF !important;
    color: white !important;
  }
  
  .flatpickr-day.inRange {
    background: rgba(54, 153, 255, 0.1) !important;
    border-color: transparent !important;
    box-shadow: none !important;
  }
  
  .flatpickr-day.today {
    border-color: #3699FF !important;
    font-weight: 700 !important;
  }
  
  .flatpickr-day.today:not(.selected) {
    color: #3699FF !important;
  }
  
  .flatpickr-months .flatpickr-prev-month,
  .flatpickr-months .flatpickr-next-month {
    padding: 0.5rem !important;
    border-radius: 0.375rem !important;
  }
  
  .flatpickr-months .flatpickr-prev-month:hover,
  .flatpickr-months .flatpickr-next-month:hover {
    background: rgba(54, 153, 255, 0.1) !important;
    color: #3699FF !important;
  }
  
  /* Calendar arrow icons */
  .flatpickr-months .flatpickr-prev-month svg,
  .flatpickr-months .flatpickr-next-month svg {
    fill: #7e8299 !important;
  }
  
  .flatpickr-months .flatpickr-prev-month:hover svg,
  .flatpickr-months .flatpickr-next-month:hover svg {
    fill: #3699FF !important;
  }
  
  /* Multiple months view */
  .flatpickr-calendar.multiMonth .flatpickr-days {
    border-right: 1px solid #e4e6ef !important;
  }
  
  .flatpickr-calendar.multiMonth .flatpickr-days:last-child {
    border-right: none !important;
  }
  
  /* Tooltip for year input */
  .numInputWrapper {
    position: relative !important;
  }
  
  .numInputWrapper:before {
    content: 'Click arrows to change year' !important;
    position: absolute !important;
    bottom: -25px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    background: #181c32 !important;
    color: white !important;
    padding: 4px 8px !important;
    border-radius: 4px !important;
    font-size: 11px !important;
    white-space: nowrap !important;
    opacity: 0 !important;
    pointer-events: none !important;
    transition: opacity 0.2s !important;
    z-index: 1000 !important;
  }
  
  .numInputWrapper:hover:before {
    opacity: 1 !important;
  }
  </style>
  
  <!-- Task Drawer Component -->
  <app-task-drawer 
    [isOpen]="isDrawerOpen"
    [task]="selectedTask"
    (closeDrawer)="closeTaskDrawer()"
    (taskUpdated)="onTaskUpdated($event)"
    (taskDeleted)="onTaskDeleted($event)">
  </app-task-drawer>
  
  <!-- New Task Modal Component -->
  <app-new-task 
    [projects]="projects"
    (taskCreated)="onTaskCreated($event)">
  </app-new-task>
  
  <style>
  .cursor-pointer {
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .cursor-pointer:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  
  .border-hover-primary:hover {
    border-color: #3699FF !important;
  }
  </style>			
                                

    </div>

  
 </div>
        <!--begin::Row-->
                            
                            </div>
                            <!--end::Content container-->
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Content wrapper-->
                    <!--begin::Footer-->
                    <div id="kt_app_footer" class="app-footer">
                        <!--begin::Footer container-->
                        <div class="app-container container-fluid d-flex flex-column flex-md-row flex-center flex-md-stack py-3">
                            <!--begin::Copyright-->
                            <div class="text-gray-900 order-2 order-md-1">
                                <span class="text-muted fw-semibold me-1">2025&copy;</span>
                                <a href="#" target="_blank" class="text-gray-800 text-hover-primary">Swift - Office Productivity App</a>
                            </div>
                            <!--end::Copyright-->
                            <!--begin::Menu-->
                            <ul class="menu menu-gray-600 menu-hover-primary fw-semibold order-1">
                                <li class="menu-item">
                                    <a href="#" target="_blank" class="menu-link px-2">About</a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" target="_blank" class="menu-link px-2">Support</a>
                                </li>
                                
                            </ul>
                            <!--end::Menu-->
                        </div>
                        <!--end::Footer container-->
                    </div>
                    <!--end::Footer-->
                </div>
                <!--end:::Main-->
            </div>
            <!--end::Wrapper-->
    
    <!--end::App-->


    	<!--begin::Scrolltop-->
		<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
			<i class="ki-duotone ki-arrow-up">
				<span class="path1"></span>
				<span class="path2"></span>
			</i>
		</div>
		<!--end::Scrolltop-->


   <!-- New Task Modal Component -->
<app-new-task 
[projects]="projects"
(taskCreated)="onTaskCreated($event)">
</app-new-task>

<!-- Task Drawer Component -->
<app-task-drawer 
[isOpen]="isDrawerOpen"
[task]="selectedTask"
(closeDrawer)="closeTaskDrawer()"
(taskUpdated)="onTaskUpdated($event)"
(taskDeleted)="onTaskDeleted($event)">
</app-task-drawer>

<style>
.cursor-pointer {
cursor: pointer;
}

.cursor-pointer:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0,0,0,0.1);
transition: all 0.2s ease;
}
</style>

